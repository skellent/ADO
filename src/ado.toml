[general]
titulo = "Skell's ADO"
icono = "./img/icono.png"
logo = "./img/logo.png"
logotipo = "./img/logotipo.png"
wide = "centered"
sidebar_estado = "collapsed"

[desarrollo]
debug = false

[tablas]
usuarios = "CREATE TABLE IF NOT EXISTS usuarios (id INT UNSIGNED NOT NULL AUTO_INCREMENT PRIMARY KEY, usuario VARCHAR(20) NOT NULL, contrasena VARCHAR(20) NOT NULL, tipo INT NOT NULL, fechaCreacion TIMESTAMP DEFAULT CURRENT_TIMESTAMP, CHECK (LENGTH(usuario) >= 4), CHECK (LENGTH(contrasena) >= 8)) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4"
clientes = "CREATE TABLE IF NOT EXISTS clientes (id INT PRIMARY KEY AUTO_INCREMENT, cedula VARCHAR(20) NOT NULL UNIQUE, codigo_socio INT UNIQUE, nombre VARCHAR(100) NOT NULL, telefono VARCHAR(15) NOT NULL, correo VARCHAR(100), direccion VARCHAR(200), descripcion TEXT, fecha_creacion TIMESTAMP DEFAULT CURRENT_TIMESTAMP, fecha_actualizacion TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, activo TINYINT(1) DEFAULT 1, CONSTRAINT chk_cedula_length CHECK (CHAR_LENGTH(cedula) BETWEEN 6 AND 20), CONSTRAINT chk_nombre_length CHECK (CHAR_LENGTH(nombre) BETWEEN 2 AND 100), CONSTRAINT chk_telefono_length CHECK (CHAR_LENGTH(telefono) BETWEEN 7 AND 15), CONSTRAINT chk_codigo_socio_positive CHECK (codigo_socio IS NULL OR codigo_socio > 0), CONSTRAINT chk_email_format CHECK (correo IS NULL OR correo LIKE '%_@__%.__%')) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci"
productos = "CREATE TABLE IF NOT EXISTS productos (id INT PRIMARY KEY AUTO_INCREMENT, codigo VARCHAR(50) NOT NULL UNIQUE, nombre VARCHAR(100) NOT NULL, precio DECIMAL(10, 2) NOT NULL, cantidad INT NOT NULL DEFAULT 0, proveedor VARCHAR(100), fecha_creacion TIMESTAMP DEFAULT CURRENT_TIMESTAMP, fecha_modificacion TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, estado TINYINT(1) DEFAULT 1, CONSTRAINT chk_codigo_length CHECK (CHAR_LENGTH(codigo) BETWEEN 1 AND 50), CONSTRAINT chk_nombre_length CHECK (CHAR_LENGTH(nombre) BETWEEN 2 AND 100), CONSTRAINT chk_precio_positive CHECK (precio >= 0), CONSTRAINT chk_cantidad_positive CHECK (cantidad >= 0), CONSTRAINT chk_proveedor_length CHECK (proveedor IS NULL OR CHAR_LENGTH(proveedor) BETWEEN 2 AND 100)) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci"
ventas = "CREATE TABLE IF NOT EXISTS ventas (id INT PRIMARY KEY AUTO_INCREMENT, codigo_venta VARCHAR(20) NOT NULL UNIQUE, fecha_venta TIMESTAMP DEFAULT CURRENT_TIMESTAMP, id_cliente INT NOT NULL, total DECIMAL(12, 2) NOT NULL, productos_vendidos TEXT NOT NULL COMMENT 'JSON o lista de productos vendidos', metodo_pago VARCHAR(50) NOT NULL, estado_venta VARCHAR(20) DEFAULT 'completada' COMMENT 'completada, pendiente, cancelada', vendedor VARCHAR(100) NOT NULL, observaciones TEXT, fecha_creacion TIMESTAMP DEFAULT CURRENT_TIMESTAMP, fecha_actualizacion TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP, activo TINYINT(1) DEFAULT 1, CONSTRAINT chk_codigo_venta_length CHECK (CHAR_LENGTH(codigo_venta) BETWEEN 5 AND 20), CONSTRAINT chk_total_positive CHECK (total >= 0), CONSTRAINT chk_metodo_pago_length CHECK (CHAR_LENGTH(metodo_pago) BETWEEN 2 AND 50), CONSTRAINT chk_estado_venta_valido CHECK (estado_venta IN ('completada', 'pendiente', 'cancelada')), CONSTRAINT chk_vendedor_length CHECK (CHAR_LENGTH(vendedor) BETWEEN 2 AND 100), CONSTRAINT fk_venta_cliente FOREIGN KEY (id_cliente) REFERENCES clientes(id) ON DELETE RESTRICT ON UPDATE CASCADE) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_unicode_ci"